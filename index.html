<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="./output.css" rel="stylesheet">
        <title>Main Menu</title>
    </head>
    <body> 
        <script type="module" src="main.js"></script>

        <div id='surround' class="h-screen content-center bg-radial from-pink-300 from-40% to-pink-500">
            <div id='intro_section' class='flex flex-col justify-center items-center py-5'> 
                <h1 id='greeting_heading' class="text-4xl font-bold text-white text-center"></h1>
                <script>
                    (function(){
                        // Get the heading
                        const greetEl = document.getElementById('greeting_heading');
                        const hour = new Date().getHours();
                        // Compare current time to time boundaries.
                        if (hour >= 5 && hour < 12) {
                            // Morning
                            greetEl.textContent = 'Morning gorgeous';
                        } else if (hour >= 12 && hour < 17) {
                            // Afternoon
                            greetEl.textContent = 'Afternoon babi!';
                        } else if (hour >= 17 && hour < 21) {
                            // Evening
                            greetEl.textContent = "Hi baby, hope you're having a good evening!";
                        } else {
                            // Night
                            greetEl.textContent = "Hey sleepy girl.";
                        }
                    })();
                </script>
                <h1 class="text-3xl font-bold text-white text-center p-5">
                    I love you very much!
                </h1>
                <button id="btn-scroll"
                class='w-sm h-sm border-fuchsia-300 border-2 bg-white shadow-lg text-black rounded-2xl p-5 m-12 transition delay-150 duration-300 ease-in-out hover:-translate-y-1 hover:scale-110 hover:bg-fuchsia-500 hover:text-white active:bg-fuchsia-700 focus:outline-none focus:ring-4 focus:ring-fuchsia-300'>
                    Press Me!
                </button>
            </div>
        </div>
        <div id="content_section" class="h-screen flex flex-col bg-white p-12">
            <script>
            (function(){
                const btn = document.getElementById('btn-scroll');
                const target = document.getElementById('content_section');
                if (!btn || !target) return;

                // Click handler: smooth scroll and brief colour feedback
                btn.addEventListener('click', () => {
                    // Add colour classes immediately for feedback
                    btn.classList.add('bg-fuchsia-500','text-white');

                    // Smoothly scroll the target into view
                    target.scrollIntoView({ behavior: 'smooth' });

                    // Remove the temporary colours after transition (~800ms)
                    setTimeout(() => {
                        btn.classList.remove('bg-fuchsia-500','text-white');
                    }, 800);
                });

                // Keyboard accessibility: space/enter trigger click
                btn.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        btn.click();
                    }
                });
            })();
            </script>
            <div class='flex  justify-between bg-white p-12'>
                <div id='date_time_div' class='w-1/2 text-left'>
                    <h1 id='date_time' class='text-3xl font-bold text-black p-5'></h1>
                    <script>
                        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                        const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                        const date_suffix = ['st', 'nd', 'rd', 'th'];
                        const date = new Date();
                        const dayOfMonth = date.getDate();
                        let suffix = 'th';
                        if (dayOfMonth % 10 === 1 && dayOfMonth !== 11) {
                            suffix = 'st';
                        } else if (dayOfMonth % 10 === 2 && dayOfMonth !== 12) {
                            suffix = 'nd';
                        } else if (dayOfMonth % 10 === 3 && dayOfMonth !== 13) {
                            suffix = 'rd';
                        }
                            
                        let current_date = days[date.getDay()-1] + ' ' + date.getDate() + suffix + ' ' + months[date.getMonth()] ;
                        document.getElementById('date_time').textContent = current_date;
                    </script>
                </div>
                <div id='quote_div' class='w-1/2 text-right'>
                    <h1 id='quote' class='text-3xl font-bold text-black p-5'></h1>
                    <h3 id='quote_author'></h3>
                    <script>
                        (async function(){
                            const quoteEl = document.getElementById('quote');
                            const authorEl = document.getElementById('quote_author');

                            // small CSV -> array parser that handles quoted fields and escaped quotes
                            function csvToArray(str, delimiter = ','){
                                const pattern = new RegExp(
                                    (
                                        '(\\' + delimiter + '|\\r?\\n|\\r|^)' +
                                        '(?:"([^"]*(?:""[^"]*)*)"|' +
                                        '([^"\\' + delimiter + '\\r\\n]*))'
                                    ),
                                    'gi'
                                );

                                const data = [[]];
                                let matches = null;
                                while ((matches = pattern.exec(str)) !== null) {
                                    const matchedDelimiter = matches[1];
                                    if (matchedDelimiter.length && matchedDelimiter !== delimiter) {
                                        data.push([]);
                                    }
                                    const matchedValue = matches[2] ? matches[2].replace(/""/g, '"') : matches[3];
                                    data[data.length - 1].push(matchedValue);
                                }
                                return data;
                            }

                            try {
                                // updated filename
                                const res = await fetch('./res/quotes.csv');
                                if (!res.ok) throw new Error('Could not fetch quotes file');
                                const text = await res.text();

                                const rows = csvToArray(text).filter(r => r.length && r.some(c => (c||'').trim() !== ''));
                                if (rows.length <= 1) return; // no data

                                // use headers as provided in CSV (e.g. "Author", "Quote")
                                const header = rows.shift().map(h => (h || '').trim().replace(/^"|"$/g, ''));

                                // find column indexes
                                const quoteIdx = header.indexOf('Quote');
                                const authorIdx = header.indexOf('Author');

                                // pick a random row (array of columns)
                                const pickRow = rows[Math.floor(Math.random() * rows.length)];

                                const rawQuote = pickRow && (quoteIdx !== -1 ? pickRow[quoteIdx] : (pickRow[1] || ''));
                                const rawAuthor = pickRow && (authorIdx !== -1 ? pickRow[authorIdx] : (pickRow[0] || ''));

                                const q = (rawQuote || '').replace(/^"|"$/g, '').trim();
                                const a = (rawAuthor || '').replace(/^"|"$/g, '').trim();

                                // display with prefix
                                if (q) {
                                    quoteEl.textContent = `"${q}"`;
                                }
                                if (a && authorEl) {
                                    authorEl.textContent = `${a}`;
                                } else if (authorEl) {
                                    authorEl.textContent = '';
                                }
                            } catch (err) {
                                console.error('Unable to load quotes:', err);
                            }
                        })();
                    </script>
                </div>
            </div>
             <div id='activity_div' class='border-red-700 border-0 flex-1 flex gap-5 p-10'>
                <div id='book_nook' class='flex flex-col justify-center items-center bg-pink-200 shadow-lg/30 shadow-pink-700 rounded-md flex-1 p-5 transition delay-150 duration-300 ease-in-out hover:-translate-y-1 hover:scale-103'>
                        <p class='font-bold text-center'>Book Nook - Book Recommendations and Reading List.</p>
                        <img src="image/book_shelf.png" alt="Bookshelf Image">
                        <script>
                            document.getElementById("book_nook").addEventListener("click", function () {
                                window.location.href = "book_nook.html";
                            });
                        </script>
                </div>
                <!--<div id='record_studio' class='flex flex-col justify-center items-center bg-pink-200 shadow-lg/30 shadow-pink-700 rounded-md flex-1 p-5 transition delay-150 duration-300 ease-in-out hover:-translate-y-1 hover:scale-103'>
                        <p class='font-bold text-center'>Record Studio - Song Recommendations.</p>
                        <img src="image/record_player.png" alt="Record Player Image">
                </div> -->
                <div id='want_of_the_week' class='flex flex-col justify-center items-center bg-pink-200 shadow-lg/30 shadow-pink-700 rounded-md flex-1 p-5 transition delay-150 duration-300 ease-in-out hover:-translate-y-1 hover:scale-103'>
                        <p class='font-bold text-center'>Want of the Week - What do we want this week?</p>
                        <img src="image/gift.png" alt="Gift Image">
                        <script>
                            document.getElementById("want_of_the_week").addEventListener("click", function () {
                                window.location.href = "want_of_the_week.html";
                            });
                        </script>
                </div>
                <div id='chip_rankings' class='flex flex-col justify-center items-center bg-pink-200 shadow-lg/30 shadow-pink-700 rounded-md flex-1 p-5 transition delay-150 duration-300 ease-in-out hover:-translate-y-1 hover:scale-103'>
                        <p class='font-bold text-center'>Chip Rankings - UKs Definitive Chip Rankings.</p>
                        <img src="image/chips.png" alt="Chips Image">
                        <script>
                            document.getElementById("chip_rankings").addEventListener("click", function () {
                                window.location.href = "chip_rankings.html";
                            });
                        </script>
                </div>
                <div id='document_repository' class='flex flex-col justify-center items-center bg-pink-200 shadow-lg/30 shadow-pink-700 rounded-md flex-1 p-5 transition delay-150 duration-300 ease-in-out hover:-translate-y-1 hover:scale-103'>
                        <p class='font-bold text-center'>Document Repository - Toby's Important Document Hoard.</p>
                        <img src="image/folder.png" alt="Folder Image">
                        <script>
                            document.getElementById("document_repository").addEventListener("click", function () {
                                window.location.href = "doc_hoard.html";
                            });
                        </script>
                </div>
            </div>
        </div>
        
        
    </body>
</html>
